function string_to_color(a,b){var c=function(a){for(var b=0,c=0;c<a.length;c++)b=a.charCodeAt(c)+((b<<5)-b);return b},d=function(a,b){var c=parseInt(a,16),d=Math.round(2.55*b),e=(c>>16)+d,f=(255&c>>8)+d,g=(255&c)+d;return(16777216+65536*(255>e?1>e?0:e:255)+256*(255>f?1>f?0:f:255)+(255>g?1>g?0:g:255)).toString(16).slice(1)},e=function(a){var b=(255&a>>24).toString(16)+(255&a>>16).toString(16)+(255&a>>8).toString(16)+(255&a).toString(16);return b},f=function(a){var b=parseInt(a.slice(0,2),16),c=parseInt(a.slice(2,4),16),d=parseInt(a.slice(4,6),16);return[b,c,d]},g=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255;b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92,d=d>.04045?Math.pow((d+.055)/1.055,2.4):d/12.92;var e=.4124*b+.3576*c+.1805*d,f=.2126*b+.7152*c+.0722*d,g=.0193*b+.1192*c+.9505*d;return[100*e,100*f,100*g]},h=function(a){var b=a[0],c=a[1],d=a[2];b/=95.047,c/=100,d/=108.883,b=b>.008856?Math.pow(b,1/3):7.787*b+16/116,c=c>.008856?Math.pow(c,1/3):7.787*c+16/116,d=d>.008856?Math.pow(d,1/3):7.787*d+16/116;var e=116*c-16,f=500*(b-c),g=200*(c-d);return{l:e,a:f,b:g}},i=function(a){var b=f(a),c=g(b);return h(c)},j=function(a,b){var c=a.l-b.l,d=a.a-b.a,e=a.b-b.b,f=Math.sqrt(Math.pow(a.a,2)+Math.pow(a.b,2)),g=Math.sqrt(Math.pow(b.a,2)+Math.pow(b.b,2)),h=f-g,i=Math.pow(d,2)+Math.pow(e,2)-Math.pow(h,2);i=0>i?0:Math.sqrt(i);var j=1,k=1,l=1,m=1,n=.045,o=.015,p=1+n*f,q=1+o*f,r=Math.pow(c/(m*j),2)+Math.pow(h/(k*p),2)+Math.pow(i/(l*q),2),s=0>r?0:Math.sqrt(r);return s},k=d(e(c(a)),40),l=i(k);if(b&&b.colors){var m=b.colors.map(i),n=m.map(function(a){return j(l,a)}),o=n.reduce(function(a,c){return a?a:c<=b.range},!1);return o?string_to_color(a+" ",b):k}return k}